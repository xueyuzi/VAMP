<script src="alert.component.ts"></script>
<nb-card>
  <nb-card-header>
    告警
  </nb-card-header>

  <nb-card-body>
    <button nbButton style="margin:10px 0" (click)="showNew()">新建</button>
    <ng2-smart-table [source]="agentSource" [settings]="settings" (userRowSelect)="showEdit($event)" (deleteConfirm)="delUser($event)"></ng2-smart-table>
  </nb-card-body>
</nb-card>
<p-dialog header="配置告警" [(visible)]="isEdit" [draggable]="false" [resizable]="false">
  <div class="setting-container">

    <div class="setting-item">
      <label>标题:</label>
      <input type="text" nbInput [(ngModel)]="user.title" fullWidth>
    </div>
    <div class="setting-item">
      <label>所有者:</label>
      <input type="text" nbInput [(ngModel)]="user.owner" fullWidth>
    </div>
    <div class="setting-item">
      <label>描述:</label>
      <input type="text" nbInput [(ngModel)]="user.owner" fullWidth>
    </div>
    <div class="setting-item">
      <label>Cron 表达式:</label>
      <input type="text" nbInput [(ngModel)]="user.owner" fullWidth>
    </div>
    <div class="setting-item" style="height:auto">
      <label>查询语句:</label>
      <div id="agent-json-editor" style="height:200px;flex:1;margin:10px 0"></div>
    </div>
    <div class="setting-item">
      <label>运算符:</label>
      <nb-select  placeholder="请选择类型" [(selected)]="user.type" style="width: 200px">
        <nb-option [value]="2" >大于</nb-option>
        <nb-option [value]="1" >小于</nb-option>
        <nb-option [value]="0" >等于</nb-option>
      </nb-select>
    </div>
    <div class="setting-item">
      <label>值:</label>
      <input type="text" nbInput [(ngModel)]="user.owner" fullWidth>
    </div>
    <nb-accordion class="expaned">
      <nb-accordion-item >
        <nb-accordion-item-header>邮件提醒</nb-accordion-item-header>
        <nb-accordion-item-body>
          <nb-select  placeholder="发送邮件" [(selected)]="user.type" style="width: 200px">
            <nb-option [value]="2" >大于</nb-option>
            <nb-option [value]="1" >小于</nb-option>
            <nb-option [value]="0" >等于</nb-option>
          </nb-select>
        </nb-accordion-item-body>
      </nb-accordion-item>
    </nb-accordion>
  </div>
  <button nbButton fullWidth (click)="saveUser()">保存</button>
</p-dialog>

